<div class="container mx-auto px-4 py-8 max-w-4xl">
  <%# Back Navigation %>
  <div class="mb-6">
    <%= link_to posts_path, class: "text-mineral-blue hover:text-mineral-blue/80 flex items-center space-x-2" do %>
      <span>‚Üê Back to Feed</span>
    <% end %>
  </div>

  <%# Profile Header Card %>
  <div class="card p-8 mb-8">
    <div class="flex items-start space-x-6">
      <%= image_tag @user.profile_picture_url(size: 150),
          alt: "#{@user.name}'s profile picture",
          class: "w-32 h-32 rounded-full border-4 border-living-moss flex-shrink-0" %>

      <div class="flex-1">
        <div class="flex items-start justify-between mb-2">
          <h1 class="text-4xl font-bold text-midnight-soil"><%= @user.name %></h1>
          <% if @user == current_user %>
            <%= link_to edit_user_path(@user), class: "btn btn-primary text-sm" do %>
              ‚úèÔ∏è Edit Profile
            <% end %>
          <% end %>
        </div>
        <p class="text-slate-mist mb-1"><%= @user.email %></p>
        <p class="text-sm text-slate-mist mb-6">
          üå± Member since <%= @user.created_at.strftime("%B %Y") %>
        </p>

        <%# User Stats %>
        <div class="flex items-center space-x-8">
          <div class="text-center">
            <div class="text-3xl font-bold text-mineral-blue"><%= @user.posts.count %></div>
            <div class="text-sm text-slate-mist"><%= "post".pluralize(@user.posts.count) %></div>
          </div>
          <div class="text-center">
            <div class="text-3xl font-bold text-living-moss"><%= @user.friends.count %></div>
            <div class="text-sm text-slate-mist"><%= "friend".pluralize(@user.friends.count) %></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <%# User's Posts Section %>
  <div>
    <h2 class="text-2xl font-bold text-midnight-soil mb-6">
      <%= @user.name == current_user.name ? "Your Posts" : "#{@user.name}'s Posts" %>
    </h2>

    <% if @posts.any? %>
      <div class="space-y-6">
        <% @posts.each do |post| %>
          <article class="card p-6 hover:shadow-lg transition-shadow">
            <%# Post Header %>
            <div class="flex items-center space-x-3 mb-4">
              <%= image_tag @user.profile_picture_url(size: 60),
                  alt: "#{@user.name}'s profile picture",
                  class: "w-12 h-12 rounded-full border-2 border-living-moss" %>
              <div>
                <h3 class="font-semibold text-lg text-midnight-soil"><%= @user.name %></h3>
                <p class="text-sm text-slate-mist">
                  <%= time_ago_in_words(post.created_at) %> ago
                </p>
              </div>
            </div>

            <%# Post Content %>
            <p class="text-midnight-soil leading-relaxed mb-4 whitespace-pre-wrap"><%= post.content %></p>

            <%# Post Image %>
            <% if post.image.present? %>
              <div class="mb-4 rounded-lg overflow-hidden">
                <%= image_tag post.image, class: "w-full" %>
              </div>
            <% end %>

            <%# Post Stats & Link %>
            <div class="flex items-center justify-between pt-4 border-t border-slate-mist/20">
              <div class="flex items-center space-x-4 text-sm text-slate-mist">
                <span class="flex items-center space-x-1">
                  <span class="text-living-moss">‚ù§Ô∏è</span>
                  <strong class="text-midnight-soil"><%= post.likes.count %></strong>
                </span>
                <span class="flex items-center space-x-1">
                  <span class="text-mineral-blue">üí¨</span>
                  <strong class="text-midnight-soil"><%= post.comments.count %></strong>
                </span>
              </div>
              <%= link_to "View Post", post_path(post), class: "btn btn-primary text-sm" %>
            </div>
          </article>
        <% end %>
      </div>
    <% else %>
      <div class="card p-12 text-center">
        <p class="text-xl text-slate-mist">üå± No posts yet</p>
        <% if @user == current_user %>
          <p class="text-slate-mist mt-2 mb-6">Share your first gardening update!</p>
          <%= link_to "Create Post", new_post_path, class: "btn btn-primary" %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
