<div class="container mx-auto px-4 py-8 max-w-4xl">
  <h1 class="text-3xl font-bold text-midnight-soil mb-8">Friend Requests ğŸ¤</h1>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <%# Received Requests Section %>
    <section>
      <h2 class="text-2xl font-semibold text-midnight-soil mb-6 flex items-center space-x-2">
        <span>ğŸ“¥</span>
        <span>Received</span>
      </h2>

      <% if @received_requests.any? %>
        <div class="space-y-4">
          <% @received_requests.each do |request| %>
            <div class="card p-4 hover:shadow-lg transition-shadow">
              <div class="flex items-center space-x-4 mb-4">
                <%= link_to user_path(request.sender) do %>
                  <%= image_tag request.sender.profile_picture_url(size: 50),
                      alt: "#{request.sender.name}'s profile picture",
                      class: "w-12 h-12 rounded-full border-2 border-mineral-blue" %>
                <% end %>
                <div class="flex-1">
                  <strong class="text-midnight-soil text-lg">
                    <%= link_to request.sender.name, user_path(request.sender), class: "hover:text-mineral-blue transition-colors" %>
                  </strong>
                  <p class="text-sm text-slate-mist">
                    Sent <%= time_ago_in_words(request.created_at) %> ago
                  </p>
                </div>
              </div>

              <div class="flex items-center space-x-3">
                <%= button_to friend_request_path(request), method: :patch, params: { status: "accepted" }, class: "btn btn-secondary flex-1" do %>
                  âœ“ Accept
                <% end %>
                <%= button_to friend_request_path(request), method: :patch, params: { status: "rejected" }, class: "btn btn-danger flex-1" do %>
                  âœ— Reject
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="card p-8 text-center">
          <p class="text-slate-mist">No pending requests received ğŸŒ±</p>
        </div>
      <% end %>
    </section>

    <%# Sent Requests Section %>
    <section>
      <h2 class="text-2xl font-semibold text-midnight-soil mb-6 flex items-center space-x-2">
        <span>ğŸ“¤</span>
        <span>Sent</span>
      </h2>

      <% if @sent_requests.any? %>
        <div class="space-y-4">
          <% @sent_requests.each do |request| %>
            <div class="card p-4 hover:shadow-lg transition-shadow">
              <div class="flex items-center space-x-4 mb-4">
                <%= link_to user_path(request.receiver) do %>
                  <%= image_tag request.receiver.profile_picture_url(size: 50),
                      alt: "#{request.receiver.name}'s profile picture",
                      class: "w-12 h-12 rounded-full border-2 border-slate-mist" %>
                <% end %>
                <div class="flex-1">
                  <strong class="text-midnight-soil text-lg">
                    <%= link_to request.receiver.name, user_path(request.receiver), class: "hover:text-mineral-blue transition-colors" %>
                  </strong>
                  <p class="text-sm text-slate-mist">
                    Sent <%= time_ago_in_words(request.created_at) %> ago
                  </p>
                </div>
              </div>

              <%= button_to friend_request_path(request), method: :delete, data: { turbo_confirm: "Are you sure you want to cancel this friend request?" }, class: "btn bg-slate-mist text-white hover:bg-slate-mist/80 w-full" do %>
                Cancel Request
              <% end %>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="card p-8 text-center">
          <p class="text-slate-mist">No pending requests sent ğŸŒ±</p>
        </div>
      <% end %>
    </section>
  </div>
</div>
