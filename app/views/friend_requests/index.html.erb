<div class="friend-requests-container">
  <h1>Friend Requests</h1>

  <section class="received-requests">
    <h2>Received Requests</h2>
    <% if @received_requests.any? %>
      <div class="requests-list">
        <% @received_requests.each do |request| %>
          <div class="request-card">
            <%= image_tag request.sender.profile_picture_url(size: 50), alt: "#{request.sender.name}'s profile picture", class: "profile-picture" %>
            <div class="request-info">
              <strong><%= request.sender.name %></strong>
              <span class="request-date">Sent <%= time_ago_in_words(request.created_at) %> ago</span>
            </div>
            <div class="request-actions">
              <%= button_to "Accept", friend_request_path(request), method: :patch, params: { status: "accepted" }, class: "btn btn-accept" %>
              <%= button_to "Reject", friend_request_path(request), method: :patch, params: { status: "rejected" }, class: "btn btn-reject" %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="no-requests">No pending friend requests received.</p>
    <% end %>
  </section>

  <section class="sent-requests">
    <h2>Sent Requests</h2>
    <% if @sent_requests.any? %>
      <div class="requests-list">
        <% @sent_requests.each do |request| %>
          <div class="request-card">
            <%= image_tag request.receiver.profile_picture_url(size: 50), alt: "#{request.receiver.name}'s profile picture", class: "profile-picture" %>
            <div class="request-info">
              <strong><%= request.receiver.name %></strong>
              <span class="request-date">Sent <%= time_ago_in_words(request.created_at) %> ago</span>
            </div>
            <div class="request-actions">
              <%= button_to "Cancel", friend_request_path(request), method: :delete, class: "btn btn-cancel", data: { confirm: "Are you sure you want to cancel this friend request?" } %>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="no-requests">No pending friend requests sent.</p>
    <% end %>
  </section>
</div>
